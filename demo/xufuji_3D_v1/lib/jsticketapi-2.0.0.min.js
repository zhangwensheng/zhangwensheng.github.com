!function(k,q){"function"==typeof define&&(define.amd||define.cmd)?define(function(){return q(k)}):q(k,!0)}(this,function(k,q){function e(a,h,d){k.WeixinJSBridge?WeixinJSBridge.invoke(a,b(h),function(h){g(a,h,d)}):t(a,d)}function f(a,h,d){k.WeixinJSBridge?WeixinJSBridge.on(a,function(w){d&&d.trigger&&d.trigger(w);g(a,w,h)}):d?t(a,d):t(a,h)}function b(a){return a=a||{},a.appId=u.appId,a.verifyAppId=u.appId,a.verifySignType="sha1",a.verifyTimestamp=u.timestamp+"",a.verifyNonceStr=u.nonceStr,a.verifySignature=
u.signature,a}function g(a,h,d){var w,b;switch(delete h.err_code,delete h.err_desc,delete h.err_detail,w=h.errMsg,w||(w=h.err_msg,delete h.err_msg,w=F(a,w,d),h.errMsg=w),d=d||{},d._complete&&(d._complete(h),delete d._complete),w=h.errMsg||"",u.debug&&!d.isInnerInvoke&&alert(JSON.stringify(h)),b=w.indexOf(":"),w.substring(b+1)){case "ok":d.success&&d.success(h);break;case "cancel":d.cancel&&d.cancel(h);break;default:d.fail&&d.fail(h)}d.complete&&d.complete(h)}function F(a,h){var d,b,e;if(h){switch(d=
h.indexOf(":"),a){case c.config:b="config";break;case c.openProductSpecificView:b="openProductSpecificView";break;default:b=h.substring(0,d),b=b.replace(/_/g," "),b=b.replace(/\b\w+\b/g,function(a){return a.substring(0,1).toUpperCase()+a.substring(1)}),b=b.substring(0,1).toLowerCase()+b.substring(1),b=b.replace(/ /g,""),-1!=b.indexOf("Wcpay")&&(b=b.replace("Wcpay","WCPay")),(e=n[b])&&(b=e)}d=h.substring(d+1);"confirm"==d&&(d="ok");-1!=d.indexOf("failed_")&&(d=d.substring(7));-1!=d.indexOf("fail_")&&
(d=d.substring(5));d=d.replace(/_/g," ");d=d.toLowerCase();"access denied"!=d&&"no permission to execute"!=d||(d="permission denied");"config"==b&&"function not exist"==d&&(d="ok");h=b+":"+d}return h}function x(a){var h,d,b;if(a){h=0;for(d=a.length;d>h;++h)b=a[h],(b=c[b])&&(a[h]=b);return a}}function t(a,b){if(u.debug&&!b.isInnerInvoke){var d=n[a];d&&(a=d);b&&b._complete&&delete b._complete;console.log('"'+a+'",',b||"")}}function B(){if(!("6.0.2">G)){var a=new Image;v.appId=u.appId;v.initTime=C.initEndTime-
C.initStartTime;v.preVerifyTime=C.preVerifyEndTime-C.preVerifyStartTime;D.getNetworkType({isInnerInvoke:!0,success:function(b){v.networkType=b.networkType;a.src="https://open.weixin.qq.com/sdk/report?v="+v.version+"&o="+v.isPreVerifyOk+"&s="+v.systemType+"&c="+v.clientVersion+"&a="+v.appId+"&n="+v.networkType+"&i="+v.initTime+"&p="+v.preVerifyTime+"&u="+v.url}})}}function A(a){m&&(k.WeixinJSBridge?a():l.addEventListener&&l.addEventListener("WeixinJSBridgeReady",a,!1))}function z(){D.invoke||(D.invoke=
function(a,h,d){k.WeixinJSBridge&&WeixinJSBridge.invoke(a,b(h),d)},D.on=function(a,b){k.WeixinJSBridge&&WeixinJSBridge.on(a,b)})}var c,n,l,r,p,m,H,I,G,C,v,u,y,E,D;if(!k.jWeixin)return c={config:"preVerifyJSAPI",onMenuShareTimeline:"menu:share:timeline",onMenuShareAppMessage:"menu:share:appmessage",onMenuShareQQ:"menu:share:qq",onMenuShareWeibo:"menu:share:weiboApp",previewImage:"imagePreview",getLocation:"geoLocation",openProductSpecificView:"openProductViewWithPid",addCard:"batchAddCard",openCard:"batchViewCard",
chooseWXPay:"getBrandWCPayRequest"},n=function(){var a,b={};for(a in c)b[c[a]]=a;return b}(),l=k.document,r=l.title,p=navigator.userAgent.toLowerCase(),m=-1!=p.indexOf("micromessenger"),H=-1!=p.indexOf("android"),I=-1!=p.indexOf("iphone")||-1!=p.indexOf("ipad"),G=function(){var a=p.match(/micromessenger\/(\d+\.\d+\.\d+)/)||p.match(/micromessenger\/(\d+\.\d+)/);return a?a[1]:""}(),C={initStartTime:(new Date).getTime(),initEndTime:0,preVerifyStartTime:0,preVerifyEndTime:0},v={version:1,appId:"",initTime:0,
preVerifyTime:0,networkType:"",isPreVerifyOk:1,systemType:I?1:H?2:-1,clientVersion:G,url:encodeURIComponent(location.href)},u={},y={_completes:[]},E={state:0,res:{}},A(function(){C.initEndTime=(new Date).getTime()}),D={config:function(a){u=a;t("config",a);A(function(){e(c.config,{verifyJsApiList:x(u.jsApiList)},function(){y._complete=function(a){C.preVerifyEndTime=(new Date).getTime();E.state=1;E.res=a};y.success=function(){v.isPreVerifyOk=0};y.fail=function(a){y._fail?y._fail(a):E.state=-1};var a=
y._completes;return a.push(function(){u.debug||B()}),y.complete=function(b){for(var c=0,e=a.length;e>c;++c)a[c](b);y._completes=[]},y}());C.preVerifyStartTime=(new Date).getTime()});u.beta&&z()},ready:function(a){0!=E.state?a():(y._completes.push(a),!m&&u.debug&&a())},error:function(a){"6.0.2">G||(-1==E.state?a(E.res):y._fail=a)},checkJsApi:function(a){e("checkJsApi",{jsApiList:x(a.jsApiList)},function(){return a._complete=function(a){if(H){var b=a.checkResult;b&&(a.checkResult=JSON.parse(b))}var c,
b=a.checkResult;for(c in b)(a=n[c])&&(b[a]=b[c],delete b[c])},a}())},onMenuShareTimeline:function(a){f(c.onMenuShareTimeline,{complete:function(){e("shareTimeline",{title:a.title||r,desc:a.title||r,img_url:a.imgUrl,link:a.link||location.href},a)}},a)},onMenuShareAppMessage:function(a){f(c.onMenuShareAppMessage,{complete:function(){e("sendAppMessage",{title:a.title||r,desc:a.desc||"",link:a.link||location.href,img_url:a.imgUrl,type:a.type||"link",data_url:a.dataUrl||""},a)}},a)},onMenuShareQQ:function(a){f(c.onMenuShareQQ,
{complete:function(){e("shareQQ",{title:a.title||r,desc:a.desc||"",img_url:a.imgUrl,link:a.link||location.href},a)}},a)},onMenuShareWeibo:function(a){f(c.onMenuShareWeibo,{complete:function(){e("shareWeiboApp",{title:a.title||r,desc:a.desc||"",img_url:a.imgUrl,link:a.link||location.href},a)}},a)},startRecord:function(a){e("startRecord",{},a)},stopRecord:function(a){e("stopRecord",{},a)},onVoiceRecordEnd:function(a){f("onVoiceRecordEnd",a)},playVoice:function(a){e("playVoice",{localId:a.localId},a)},
pauseVoice:function(a){e("pauseVoice",{localId:a.localId},a)},stopVoice:function(a){e("stopVoice",{localId:a.localId},a)},onVoicePlayEnd:function(a){f("onVoicePlayEnd",a)},uploadVoice:function(a){e("uploadVoice",{localId:a.localId,isShowProgressTips:a.isShowProgressTips||1},a)},downloadVoice:function(a){e("downloadVoice",{serverId:a.serverId,isShowProgressTips:a.isShowProgressTips||1},a)},translateVoice:function(a){e("translateVoice",{localId:a.localId,isShowProgressTips:a.isShowProgressTips||1},
a)},chooseImage:function(a){e("chooseImage",{scene:"1|2"},function(){return a._complete=function(a){if(H){var b=a.localIds;b&&(a.localIds=JSON.parse(b))}},a}())},previewImage:function(a){e(c.previewImage,{current:a.current,urls:a.urls},a)},uploadImage:function(a){e("uploadImage",{localId:a.localId,isShowProgressTips:a.isShowProgressTips||1},a)},downloadImage:function(a){e("downloadImage",{serverId:a.serverId,isShowProgressTips:a.isShowProgressTips||1},a)},getNetworkType:function(a){e("getNetworkType",
{},function(){return a._complete=function(a){var b,c,e=a.errMsg;if(a.errMsg="getNetworkType:ok",b=a.subtype,delete a.subtype,b)a.networkType=b;else switch(c=e.indexOf(":"),b=e.substring(c+1)){case "fail":case "permission denied":case "localparameters":a.errMsg="getNetworkType:fail";break;default:a.networkType=b}},a}())},openLocation:function(a){e("openLocation",{latitude:a.latitude,longitude:a.longitude,name:a.name||"",address:a.address||"",scale:a.scale||28,infoUrl:a.infoUrl||""},a)},getLocation:function(a){e(c.getLocation,
{scope:"jsapi_location",signType:"sha1",timeStamp:a.timestamp+"",nonceStr:a.nonceStr,addrSign:a.addrSign},a)},hideOptionMenu:function(a){e("hideOptionMenu",{},a)},showOptionMenu:function(a){e("showOptionMenu",{},a)},closeWindow:function(a){e("closeWindow",{immediate_close:a&&a.immediateClose||0},a)},hideMenuItems:function(a){e("hideMenuItems",{menuList:a.menuList},a)},showMenuItems:function(a){e("showMenuItems",{menuList:a.menuList},a)},hideAllNonBaseMenuItem:function(a){e("hideAllNonBaseMenuItem",
{},a)},showAllNonBaseMenuItem:function(a){e("showAllNonBaseMenuItem",{},a)},scanQRCode:function(a){e("scanQRCode",{desc:a.desc,needResult:a.needResult||0,scanType:a.scanType||["qrCode","barCode"]},a)},openProductSpecificView:function(a){e(c.openProductSpecificView,{pid:a.productId,view_type:a.viewType||0},a)},addCard:function(a){var b,d,f,g=a.cardList,l=[];b=0;for(d=g.length;d>b;++b)f=g[b],f={card_id:f.cardId,card_ext:f.cardExt},l.push(f);e(c.addCard,{card_list:l},function(){return a._complete=function(a){var b,
d,c,e=a.card_list;if(e){e=JSON.parse(e);b=0;for(d=e.length;d>b;++b)c=e[b],c.cardId=c.card_id,c.cardExt=c.card_ext,c.isSuccess=c.is_succ?!0:!1,delete c.card_id,delete c.card_ext,delete c.is_succ;a.cardList=e;delete a.card_list}},a}())},chooseCard:function(a){e("chooseCard",{app_id:u.appId,location_id:a.shopId||"",sign_type:"SHA1",card_id:a.cardId||"",card_type:a.cardType||"",card_sign:a.cardSign,time_stamp:a.timestamp+"",nonce_str:a.nonceStr},function(){return a._complete=function(a){a.cardList=a.choose_card_info;
delete a.choose_card_info},a}())},openCard:function(a){var b,d,f,g=a.cardList,l=[];b=0;for(d=g.length;d>b;++b)f=g[b],f={card_id:f.cardId,code:f.code},l.push(f);e(c.openCard,{card_list:l},a)},chooseWXPay:function(a){e(c.chooseWXPay,{timeStamp:a.timestamp+"",nonceStr:a.nonceStr,"package":a.package,paySign:a.paySign,signType:"SHA1"},a)}},q&&(k.wx=k.jWeixin=D),D});
(function(k){var q=function(e,b){return e<<b|e>>>32-b},e=function(e){var b="",g,k;for(g=7;0<=g;g--)k=e>>>4*g&15,b+=k.toString(16);return b};k.extend({sha1:function(f){var b,g,k=Array(80),x=1732584193,t=4023233417,B=2562383102,A=271733878,z=3285377520,c,n,l,r,p;b=f.replace(/\x0d\x0a/g,"\n");var m="";for(f=0;f<b.length;f++)g=b.charCodeAt(f),128>g?m+=String.fromCharCode(g):(127<g&&2048>g?m+=String.fromCharCode(g>>6|192):(m+=String.fromCharCode(g>>12|224),m+=String.fromCharCode(g>>6&63|128)),m+=String.fromCharCode(g&
63|128));f=m;c=f.length;m=[];for(b=0;b<c-3;b+=4)g=f.charCodeAt(b)<<24|f.charCodeAt(b+1)<<16|f.charCodeAt(b+2)<<8|f.charCodeAt(b+3),m.push(g);switch(c%4){case 0:b=2147483648;break;case 1:b=f.charCodeAt(c-1)<<24|8388608;break;case 2:b=f.charCodeAt(c-2)<<24|f.charCodeAt(c-1)<<16|32768;break;case 3:b=f.charCodeAt(c-3)<<24|f.charCodeAt(c-2)<<16|f.charCodeAt(c-1)<<8|128}for(m.push(b);14!=m.length%16;)m.push(0);m.push(c>>>29);m.push(c<<3&4294967295);for(f=0;f<m.length;f+=16){for(b=0;16>b;b++)k[b]=m[f+b];
for(b=16;79>=b;b++)k[b]=q(k[b-3]^k[b-8]^k[b-14]^k[b-16],1);g=x;c=t;n=B;l=A;r=z;for(b=0;19>=b;b++)p=q(g,5)+(c&n|~c&l)+r+k[b]+1518500249&4294967295,r=l,l=n,n=q(c,30),c=g,g=p;for(b=20;39>=b;b++)p=q(g,5)+(c^n^l)+r+k[b]+1859775393&4294967295,r=l,l=n,n=q(c,30),c=g,g=p;for(b=40;59>=b;b++)p=q(g,5)+(c&n|c&l|n&l)+r+k[b]+2400959708&4294967295,r=l,l=n,n=q(c,30),c=g,g=p;for(b=60;79>=b;b++)p=q(g,5)+(c^n^l)+r+k[b]+3395469782&4294967295,r=l,l=n,n=q(c,30),c=g,g=p;x=x+g&4294967295;t=t+c&4294967295;B=B+n&4294967295;
A=A+l&4294967295;z=z+r&4294967295}p=e(x)+e(t)+e(B)+e(A)+e(z);return p.toLowerCase()}})})(jQuery);
function construct(k,q,e,f,b,g,F){var x=b?b:{},t=g?g:{},B=F?F:[],A=parseInt((new Date).getTime()/1E3),z="",c="";$.ajax({type:"GET",async:!1,cache:!1,url:"http://jsadapter.verystar.cn/get_jsapi_ticket_compatible?app_id="+k+"&component_appid="+q+"&call_back_func=getJsApiTicket",dataType:"jsonp",jsonp:"callback",jsonpCallback:"getJsApiTicket",success:function(b){200==b.retcode?z=b.ticket:q||$.ajax({type:"GET",async:!1,cache:!1,url:"http://adapter.verystar.cn/internalapi.php",data:"interface=wxapi&action=getJsApiTicketInternal&app_id="+
k,dataType:"jsonp",jsonp:"callback",jsonpCallback:"getJsApiTicket",success:function(b){200==b.retcode&&(z=b.ticket)}});z&&(c=$.sha1("jsapi_ticket="+z+"&noncestr=verystar&timestamp="+A+"&url="+e),wx.config({debug:!1,appId:k,timestamp:A,nonceStr:"verystar",signature:c,jsApiList:f}),wx.ready(function(){f.forEach(function(b){if("onMenuShareTimeline"==b||"menu:share:timeline"==b)wx.onMenuShareTimeline({title:x.title,link:x.link,imgUrl:x.img_url,success:function(){x.callbackfunc()}});else if("onMenuShareAppMessage"==
b||"menu:share:appmessage"==b)wx.onMenuShareAppMessage({title:t.title,desc:t.desc,link:t.link,imgUrl:t.img_url,success:function(){t.callbackfunc()}});else"hideMenuItems"==b?wx.hideMenuItems({menuList:B}):"hideOptionMenu"==b?wx.hideOptionMenu():"showOptionMenu"==b&&wx.showOptionMenu()})}))}})};